services:
    postgres-db:
        image: postgres
        restart: always
        env_file:
            - .env
        volumes:
            - pgdata:/var/lib/postgresql/

    redis-db:
        image: redis
        restart: always

    app:
        build: .
        restart: always
        env_file:
            - .env
        depends_on:
            - postgres-db
            - redis-db
        ports:
            - 3000:3000
        command: ["npm", "run", "start:dev"]

volumes:
    pgdata: